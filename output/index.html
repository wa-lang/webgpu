<!DOCTYPE html>

<html lang="en">

<title>gpu</title>

<script type="text/javascript" src="./gpu.js"></script>

<script>
  async function init() {
    const r1 = await fetch('./saturn.jpg');
    const i1 = await createImageBitmap(await r1.blob());
    const r2 = await fetch('./moon.jpg');
    const i2 = await createImageBitmap(await r2.blob());

    window._img_bitmap = [i1, i2]

    let app = new WaApp();
    app.init().then((result) => {
      app.main();

      let stepFrame = function () {
        app.StepFrame();
        window.requestAnimationFrame(stepFrame);
      }
      window.requestAnimationFrame(stepFrame);
    })
  }
  
  init()

</script>

<body>
  <h1>WebGPU RenderBundle</h1>
  <canvas id="gpuCanvas" width="512" height="512"></canvas>
</body>

</html>